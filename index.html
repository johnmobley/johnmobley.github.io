<html>
  <head>
  </head>
  <body>
    <iframe frameborder="0" width="100%" height="600px" src="https://repl.it/@johnmobley/MediumThunderousEvaluations?lite=true"></iframe>
    <button class="js-textareacopycodebtn" style="vertical-align:top;">Copy Code</button>
    <button class="js-textareacopydatabtn" style="vertical-align:top;">Copy Data</button>
    <br/>
    <textarea rows="8" cols="139" class="js-copytextcodearea">
puts 'You have a set of projects, and you need to calculate a reimbursement amount for the set. Each project has a start date and an end date. The first day of a project and the last day of a project are always "travel" days. Days in the middle of a project are "full" days. There are also two types of cities a project can be in, high cost cities and low cost cities. 

A few rules:
First day and last day of a project, or sequence of projects, is a travel day.
Any day in the middle of a project, or sequence of projects, is considered a full day.
If there is a gap between projects, then the days on either side of that gap are travel days.
If two projects push up against each other, or overlap, then those days are full days as well.
Any given day is only ever counted once, even if two projects are on the same day.
A travel day is reimbursed at a rate of 45 dollars per day in a low cost city.
A travel day is reimbursed at a rate of 55 dollars per day in a high cost city.
A full day is reimbursed at a rate of 75 dollars per day in a low cost city.
A full day is reimbursed at a rate of 85 dollars per day in a high cost city.' 
puts 'Input Project Set Data >'
def multi_gets all_text=""
  while all_text << STDIN.gets
    return all_text if all_text["__EOF__"]
  end
end
data = multi_gets
debug = false
if(debug)
  puts 'Data='

  puts ""
  puts data
end
sets = data.split(/\bSet+\s\d+\:/)
sets.delete_if{|set| set.length == 0}
if(debug)
  puts ""
  puts 'Sets='
  puts ""
  puts "Length of sets array is ="
  puts sets.length
  puts sets
end
intSetCount=1
sets.each do |set|
    puts "\nSet #{intSetCount}:\n"
    intSetCount += 1
    projects = set.split(/\bProject+\s\d+\:/)
    projects.shift
    if(debug)
      puts ""
      puts "Length of projects array is ="
      puts projects.length
    end
    setDaysWorked=Array.new
    checkForOverlapOrAdjacencyFlag = false
    projects.each do |project|
      puts "\nValue of setDaysWorked on entering projects each do loop = #{setDaysWorked}"
      startDateDirty=project.split(/\bStart+\s+\bDate+\:/)
      startDate=startDateDirty[1].split(/\bEnd+\s+\bDate+\:/)
      endDate=project.split(/\bEnd+\s+\bDate+\:/)
      startDay=startDate[0].split("/")
      setDaysWorked.push(startDay[1].to_i)
      endDay=endDate[1].split("/")
      if(startDay[1]!=endDay[1])
        setDaysWorked.push(endDay[1].to_i)
      end
      daysElapsed = endDay[1].to_i-startDay[1].to_i+1
      puts "\nstartDay=#{startDay[1]} endDay=#{endDay[1]} daysElapsed=#{daysElapsed}"
      i=endDay[1].to_i
      i -= 1
      puts "Value of i before while loop, should be endDay-1 = #{i}"
      while(i>1)
        puts "value of setDaysWorked upon entering while loop = #{setDaysWorked}"
        intPositionToInsert =setDaysWorked.last-i+1
        #stringDay = intDay.to_s
        #puts "stringDay = #{stringDay}" 
        puts "value of i within while loop = #{i}"
        puts "intPositionToInsert = #{intPositionToInsert}"
        puts "value to insert = #{i}"
        setDaysWorked.insert(intPositionToInsert,i)
        puts "setDaysWorked prior to exiting while loop = #{setDaysWorked}"
        i-=1;
        puts "value of i prior to exiting while loop = #{i}"
      end
      if(daysElapsed>2)
        puts "There was a full day for this project within this set"

        else
          checkForOverlapOrAdjacencyFlag = true;
          puts "No full days for this project within this set, check for overlap or adjacency with other projects within this set"
      end
      puts "value of setDaysWorked just prior to exiting projects each do loop = #{setDaysWorked}"
      if(debug)
        puts "startDay ="
        puts startDay[1]
        puts "endDay ="
        puts endDay[1]
        puts ""
        puts "startDate="
        puts startDate[0]
        puts ""
        puts "endDate="
        puts endDate[1]
        puts ""
        puts ""
        puts "Length of project array is ="
        puts project.length
        puts "project string ="
        puts project
        puts "type of city ="
        if project.strip[0,1]=="L"
          puts "Low"
          else
          puts "High"
        end
      end
    end
    puts "\nvalue of setDaysWorked upon exiting set each do=#{setDaysWorked}"
end
__END__
    
  </textarea>
  <textarea rows="8" cols="64" class="js-copytextdataarea">
Set 1:
  Project 1: Low Cost City Start Date: 9/1/15 End Date: 9/3/15
Set 2:
  Project 1: Low Cost City Start Date: 9/1/15 End Date: 9/1/15
  Project 2: High Cost City Start Date: 9/2/15 End Date: 9/6/15
  Project 3: Low Cost City Start Date: 9/6/15 End Date: 9/8/15
Set 3:
  Project 1: Low Cost City Start Date: 9/1/15 End Date: 9/3/15
  Project 2: High Cost City Start Date: 9/5/15 End Date: 9/7/15
  Project 3: High Cost City Start Date: 9/8/15 End Date: 9/8/15
Set 4:
  Project 1: Low Cost City Start Date: 9/1/15 End Date: 9/1/15
  Project 2: Low Cost City Start Date: 9/1/15 End Date: 9/1/15
  Project 3: High Cost City Start Date: 9/2/15 End Date: 9/2/15
  Project 4: High Cost City Start Date: 9/2/15 End Date: 9/3/15
__EOF__
  </textarea>
    <script>
  
var copyTextareaDataBtn = document.querySelector('.js-textareacopydatabtn');
var copyTextareaCodeBtn = document.querySelector('.js-textareacopycodebtn');
copyTextareaDataBtn.addEventListener('click', function(event) {
  var copyTextarea = document.querySelector('.js-copytextdataarea');
  copyTextarea.focus();
  copyTextarea.select();

  try {
    var successful = document.execCommand('copy');
    var msg = successful ? 'successful' : 'unsuccessful';
    console.log('Copying text command was ' + msg);
  } catch (err) {
    console.log('Oops, unable to copy');
  }
});
copyTextareaCodeBtn.addEventListener('click', function(event) {
  var copyTextarea = document.querySelector('.js-copytextcodearea');
  copyTextarea.focus();
  copyTextarea.select();

  try {
    var successful = document.execCommand('copy');
    var msg = successful ? 'successful' : 'unsuccessful';
    console.log('Copying text command was ' + msg);
  } catch (err) {
    console.log('Oops, unable to copy');
  }
});
    </script>
  </body>
</html>
